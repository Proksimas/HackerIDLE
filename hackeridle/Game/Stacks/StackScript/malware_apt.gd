extends StackScript

func execute() -> Dictionary:
	if targets.is_empty():
		return {
			"caster": caster,
			"action_type": "Damage",
			"targetEffects": []
		}

	var target: Entity = targets[0]

	# Faibles dégâts immédiats
	var base_damage: int = int(calcul_effect_value(caster))


	# Statut DoT : Corruption sur 3 tours
	var status := {
		"id": "Corruption",
		"type": "DoT",
		"value": base_damage * 0.3, #30% de dégats sur la durée 
		"turns": 3,
		"source": caster
	}

	return {
		"caster": caster,
		"action_type": "Damage",
		"targetEffects": [
			{
				"target": target,
				"effects": [
					{"type": "HP", "value": base_damage},
					{"type": "ApplyStatus", "status": status}
				]
			}
		]
	}
