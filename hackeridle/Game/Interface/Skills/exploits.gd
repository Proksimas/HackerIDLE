extends Panel

@onready var exploit_point_value: Label = %ExploitPointValue
@onready var exploit_icon: AspectRatioContainer = %ExploitIcon
@onready var exploit_title: Label = %ExploitTitle
@onready var exploit_progress: ProgressBar = %ExploitProgress

# Called when the node enters the scene tree for the first time.
func _ready() -> void:
	Player.s_earn_exploit_xp.connect(_on_s_earn_exploit_xp)
	Player.s_earn_exploit_level.connect(_on_s_earn_exploit_level)
	pass # Replace with function body.


func set_exploit_bar():
	if self.visible == false:
		return
	print("exploit_xp_next: %s    .exploit_xp: %s " % [Player.exploit_xp_next, Player.exploit_xp] )
	exploit_progress.min_value = 0
	exploit_progress.max_value = Player.exploit_xp_next
	exploit_progress.value = Player.exploit_xp

func refresh():
	exploit_title.text = tr("$Exploits")
	exploit_point_value.text = Global.number_to_string(Player.exploit_point)
	
	
func _draw() -> void:
	refresh()


func _on_s_earn_exploit_xp(_exploit_xp):
	set_exploit_bar()
func _on_s_earn_exploit_level(_exploit_level):
	refresh()
func _on_cheat_exploit_xp_pressed() -> void:
	Player.earn_exploit_xp(1200)
	pass # Replace with function body.
